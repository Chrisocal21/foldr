"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{33741:(e,t,a)=>{a.d(t,{$5:()=>i,AF:()=>m,M3:()=>n,Vv:()=>f,iD:()=>l,ql:()=>p,qo:()=>h,qr:()=>d,ri:()=>s,tK:()=>y});let o="/api";function r(){return localStorage.getItem("foldr_auth_token")}function n(){return!!r()&&!!localStorage.getItem("foldr_user_id")}async function l(e,t){try{let a=await fetch("".concat(o,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await a.json();if(r.success&&r.token&&r.userId)return localStorage.setItem("foldr_auth_token",r.token),localStorage.setItem("foldr_user_id",r.userId),localStorage.setItem("foldr_user_email",e),{success:!0,userId:r.userId,token:r.token};return{success:!1,error:r.error||"Login failed"}}catch(e){return{success:!1,error:"Network error - working offline"}}}async function i(e,t,a){try{let r=await fetch("".concat(o,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,inviteCode:a})}),n=await r.json();if(n.success&&n.token&&n.userId)return localStorage.setItem("foldr_auth_token",n.token),localStorage.setItem("foldr_user_id",n.userId),localStorage.setItem("foldr_user_email",e),{success:!0,userId:n.userId,token:n.token};return{success:!1,error:n.error||"Signup failed"}}catch(e){return{success:!1,error:"Network error"}}}function s(){localStorage.removeItem("foldr_auth_token"),localStorage.removeItem("foldr_user_id"),localStorage.removeItem("foldr_user_email")}let c="foldr_sync_log";function d(){let e=localStorage.getItem(c);return e?JSON.parse(e):[]}function u(e){let t=d();t.unshift(e),t.length>10&&(t.length=10),localStorage.setItem(c,JSON.stringify(t))}async function g(){let e=r();if(!e)return{success:!1,error:"Not logged in"};try{var t,a,n,l,i;let r=localStorage.getItem("foldr_deleted_items"),s=r?JSON.parse(r):null;if(!s)return{success:!0};let c=((null==(t=s.trips)?void 0:t.length)||0)+((null==(a=s.blocks)?void 0:a.length)||0)+((null==(n=s.todos)?void 0:n.length)||0)+((null==(l=s.packingItems)?void 0:l.length)||0)+((null==(i=s.expenses)?void 0:i.length)||0);if(0===c)return{success:!0};let d=await fetch("".concat(o,"/sync/push"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({deletedItems:s})}),g=await d.json();if(g.success)return localStorage.removeItem("foldr_deleted_items"),u({timestamp:new Date().toISOString(),action:"push",changes:{added:0,updated:0,deleted:c},success:!0}),{success:!0};return{success:!1,error:g.error||"Sync failed"}}catch(e){return{success:!1,error:"Network error"}}}async function m(){let e=r();if(!e)return{success:!1,error:"Not logged in"};try{var t,a,n,l,i;let r=localStorage.getItem("foldr_deleted_items"),s=r?JSON.parse(r):null,c=s?((null==(t=s.trips)?void 0:t.length)||0)+((null==(a=s.blocks)?void 0:a.length)||0)+((null==(n=s.todos)?void 0:n.length)||0)+((null==(l=s.packingItems)?void 0:l.length)||0)+((null==(i=s.expenses)?void 0:i.length)||0):0,d={trips:localStorage.getItem("foldr_trips"),blocks:localStorage.getItem("foldr_blocks"),todos:localStorage.getItem("foldr_todos"),packingItems:localStorage.getItem("foldr_packing_items"),expenses:localStorage.getItem("foldr_expenses"),settings:localStorage.getItem("foldr_settings"),deletedItems:s},g=await fetch("".concat(o,"/sync/push"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(d)}),m=await g.json();if(m.success)return localStorage.setItem("foldr_last_sync",new Date().toISOString()),localStorage.removeItem("foldr_deleted_items"),u({timestamp:new Date().toISOString(),action:"push",changes:{added:0,updated:0,deleted:c},success:!0}),{success:!0};return u({timestamp:new Date().toISOString(),action:"push",changes:{added:0,updated:0,deleted:0},success:!1,error:m.error}),{success:!1,error:m.error||"Sync failed"}}catch(e){return u({timestamp:new Date().toISOString(),action:"push",changes:{added:0,updated:0,deleted:0},success:!1,error:"Network error"}),{success:!1,error:"Network error - will sync when online"}}}async function S(){let e=r();if(!e)return{success:!1,error:"Not logged in"};try{let t=await fetch("".concat(o,"/sync/pull"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();if(a.success){let e=JSON.parse(localStorage.getItem("foldr_trips")||"[]");JSON.parse(localStorage.getItem("foldr_blocks")||"[]");let t=a.trips?JSON.parse(a.trips):[],o=a.blocks?JSON.parse(a.blocks):[],r=a.todos?JSON.parse(a.todos):[],n=a.packingItems?JSON.parse(a.packingItems):[],l=a.expenses?JSON.parse(a.expenses):[],i=new Set(e.map(e=>e.id)),s=new Set(t.map(e=>e.id)),c=t.filter(e=>!i.has(e.id)).length,d=e.filter(e=>!s.has(e.id)).length;return localStorage.setItem("foldr_trips",JSON.stringify(t)),localStorage.setItem("foldr_blocks",JSON.stringify(o)),localStorage.setItem("foldr_todos",JSON.stringify(r)),localStorage.setItem("foldr_packing_items",JSON.stringify(n)),localStorage.setItem("foldr_expenses",JSON.stringify(l)),localStorage.removeItem("foldr_deleted_items"),a.settings&&localStorage.setItem("foldr_settings",a.settings),localStorage.setItem("foldr_last_sync",new Date().toISOString()),u({timestamp:new Date().toISOString(),action:"pull",changes:{added:c,updated:0,deleted:d},success:!0}),{success:!0,changes:{added:c,removed:d}}}return u({timestamp:new Date().toISOString(),action:"pull",changes:{added:0,updated:0,deleted:0},success:!1,error:a.error}),{success:!1,error:a.error||"Sync failed"}}catch(e){return u({timestamp:new Date().toISOString(),action:"pull",changes:{added:0,updated:0,deleted:0},success:!1,error:"Network error"}),{success:!1,error:"Network error - working offline"}}}async function f(){var e,t,a,o,r;let n=localStorage.getItem("foldr_deleted_items"),l=n?JSON.parse(n):null;return l&&((null==(e=l.trips)?void 0:e.length)||0)+((null==(t=l.blocks)?void 0:t.length)||0)+((null==(a=l.todos)?void 0:a.length)||0)+((null==(o=l.packingItems)?void 0:o.length)||0)+((null==(r=l.expenses)?void 0:r.length)||0)>0&&!(await g()).success,await S()}function p(){window.addEventListener("online",()=>{n()&&f()}),setInterval(()=>{n()&&navigator.onLine&&S()},6e4)}function y(){return localStorage.getItem("foldr_last_sync")}function h(){return localStorage.getItem("foldr_user_email")}},98319:(e,t,a)=>{a.d(t,{$O:()=>B,$k:()=>m,BG:()=>h,E9:()=>g,Et:()=>J,GG:()=>U,Gg:()=>v,K8:()=>F,Kv:()=>E,Oy:()=>H,TA:()=>S,TV:()=>T,Tr:()=>w,UJ:()=>I,VQ:()=>A,Wz:()=>j,XN:()=>L,Ys:()=>D,_x:()=>_,aU:()=>M,ck:()=>K,dz:()=>y,hc:()=>f,mU:()=>C,nH:()=>p,si:()=>k,t5:()=>O,w0:()=>P,yR:()=>z,yu:()=>b,zo:()=>N});var o=a(33741);let r="foldr_trips",n="foldr_blocks",l="foldr_todos",i="foldr_deleted_items";function s(e,t){let a=function(){let e=localStorage.getItem(i);return e?JSON.parse(e):{trips:[],blocks:[],todos:[],packingItems:[],expenses:[]}}();a[e].includes(t)||(a[e].push(t),localStorage.setItem(i,JSON.stringify(a)))}let c=null;function d(){(0,o.M3)()&&(c&&clearTimeout(c),c=setTimeout(async()=>{(await (0,o.AF)()).success},2e3))}function u(e){let[t]=e.split("T"),[a,o,r]=t.split("-").map(Number);return new Date(a,o-1,r)}function g(e){try{return new Date().toLocaleTimeString("en-US",{timeZone:e,hour:"numeric",minute:"2-digit",hour12:!0})}catch(e){return""}}function m(e){try{let t=new Date().toLocaleTimeString("en-US",{timeZone:e,timeZoneName:"short"}).split(" ");return t[t.length-1]||""}catch(e){return""}}let S=[{label:"US Eastern (New York)",value:"America/New_York"},{label:"US Central (Chicago)",value:"America/Chicago"},{label:"US Mountain (Denver)",value:"America/Denver"},{label:"US Pacific (Los Angeles)",value:"America/Los_Angeles"},{label:"US Alaska",value:"America/Anchorage"},{label:"US Hawaii",value:"Pacific/Honolulu"},{label:"UK (London)",value:"Europe/London"},{label:"Central Europe (Paris)",value:"Europe/Paris"},{label:"Eastern Europe (Athens)",value:"Europe/Athens"},{label:"Dubai",value:"Asia/Dubai"},{label:"India (Mumbai)",value:"Asia/Kolkata"},{label:"Singapore",value:"Asia/Singapore"},{label:"Hong Kong",value:"Asia/Hong_Kong"},{label:"Tokyo",value:"Asia/Tokyo"},{label:"Sydney",value:"Australia/Sydney"},{label:"Auckland",value:"Pacific/Auckland"},{label:"Mexico City",value:"America/Mexico_City"},{label:"S\xe3o Paulo",value:"America/Sao_Paulo"},{label:"Buenos Aires",value:"America/Argentina/Buenos_Aires"}];async function f(e){if(!e||e.length<2)return[];try{let t=await fetch("/api/places/search?q=".concat(encodeURIComponent(e)));if(!t.ok)return[];return(await t.json()).map(e=>{var t,a;let o=parseFloat(e.lat),r=parseFloat(e.lon),n=e.address||{},l=n.city||n.town||n.village||n.municipality||"",i=n.country||"",s=(t=o,(a=r)<-50?t>18&&t<23&&a<-150?"Pacific/Honolulu":t>50&&a<-130?"America/Anchorage":a<=-115?"America/Los_Angeles":a<=-100?"America/Denver":a<=-85?"America/Chicago":a>-85?"America/New_York":t<25&&t>15&&a>-105?"America/Mexico_City":t<0&&a>-60?"America/Sao_Paulo":t<-30?"America/Argentina/Buenos_Aires":"America/New_York":a>=-10&&a<30?t>50&&a<5?"Europe/London":t>35&&t<60&&a>=0&&a<20?"Europe/Paris":t>35&&a>=20?"Europe/Athens":t<35&&t>0?"Africa/Cairo":"Europe/Paris":a>=30&&a<70?t>20&&t<35&&a<60?"Asia/Dubai":t>5&&t<35&&a>=60?"Asia/Kolkata":"Asia/Dubai":a>=70?t>30&&a>=100&&a<120?"Asia/Hong_Kong":t>0&&t<10&&a>100&&a<110?"Asia/Singapore":t>30&&a>=120&&a<145?"Asia/Tokyo":t<0&&a>110?"Australia/Sydney":a>165?"Pacific/Auckland":"Asia/Tokyo":t>18&&t<23&&a<-150?"Pacific/Honolulu":"UTC");return{displayName:e.display_name,city:l||e.display_name.split(",")[0],country:i,latitude:o,longitude:r,timezone:s}})}catch(e){return[]}}function p(){let e=localStorage.getItem(r);return(e?JSON.parse(e):[]).sort((e,t)=>u(e.startDate).getTime()-u(t.startDate).getTime())}function y(e){let t=p(),a=t.findIndex(t=>t.id===e.id);a>=0?t[a]={...e,updatedAt:new Date().toISOString()}:t.push(e),localStorage.setItem(r,JSON.stringify(t)),d()}function h(e){s("trips",e),w().filter(t=>t.tripId===e).forEach(e=>s("blocks",e.id));let t=p().filter(t=>t.id!==e);localStorage.setItem(r,JSON.stringify(t));let a=w().filter(t=>t.tripId!==e);localStorage.setItem(n,JSON.stringify(a)),d()}function I(e){return p().find(t=>t.id===e)}function _(e,t){let a=new Date;a.setHours(0,0,0,0);let o=u(e),r=u(t);return a<o?"upcoming":a>r?"past":"active"}function w(){let e=localStorage.getItem(n);return e?JSON.parse(e):[]}function k(e){return w().filter(t=>t.tripId===e).sort((e,t)=>{let a=e.date||e.createdAt,o=t.date||t.createdAt;return u(a).getTime()-u(o).getTime()})}function A(e){let t=w(),a=t.findIndex(t=>t.id===e.id);a>=0?t[a]={...e,updatedAt:new Date().toISOString()}:t.push(e),localStorage.setItem(n,JSON.stringify(t)),d()}function N(e){s("blocks",e);let t=w().filter(t=>t.id!==e);localStorage.setItem(n,JSON.stringify(t)),d()}function O(e,t){let a=b(e);if(!a)return;let o={...a,id:crypto.randomUUID(),tripId:t||a.tripId,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return A(o),o}function b(e){return w().find(t=>t.id===e)}function v(){let e=localStorage.getItem(l);return e?JSON.parse(e):[]}function J(e){let t=v(),a=t.findIndex(t=>t.id===e.id);a>=0?t[a]={...e,updatedAt:new Date().toISOString()}:t.push(e),localStorage.setItem(l,JSON.stringify(t)),d()}function D(e){s("todos",e);let t=v().filter(t=>t.id!==e);localStorage.setItem(l,JSON.stringify(t)),d()}function T(e){let t=v(),a=t.findIndex(t=>t.id===e);a>=0&&(t[a].completed=!t[a].completed,t[a].updatedAt=new Date().toISOString(),localStorage.setItem(l,JSON.stringify(t)),d())}function C(e){let t=e.toLowerCase();return{trips:p().filter(e=>e.name.toLowerCase().includes(t)),blocks:w().filter(e=>JSON.stringify(e).toLowerCase().includes(t))}}let x="foldr_packing_items";function P(e){let t=localStorage.getItem(x);return(t?JSON.parse(t):[]).filter(t=>t.tripId===e)}function U(e){let t=localStorage.getItem(x),a=t?JSON.parse(t):[],o=a.findIndex(t=>t.id===e.id);o>=0?a[o]=e:a.push(e),localStorage.setItem(x,JSON.stringify(a)),d()}function E(e){s("packingItems",e);let t=localStorage.getItem(x),a=t?JSON.parse(t):[];localStorage.setItem(x,JSON.stringify(a.filter(t=>t.id!==e))),d()}function B(e){let t=localStorage.getItem(x),a=t?JSON.parse(t):[],o=a.findIndex(t=>t.id===e);o>=0&&(a[o].packed=!a[o].packed,localStorage.setItem(x,JSON.stringify(a)),d())}function L(e,t){let a=new Set(P(e).map(e=>e.name.toLowerCase()));t.forEach(t=>{a.has(t.name.toLowerCase())||U({id:crypto.randomUUID(),tripId:e,name:t.name,category:t.category,packed:!1,quantity:t.quantity,createdAt:new Date().toISOString()})})}let H=[{name:"Beach",icon:"\uD83C\uDFD6️",items:[{name:"Swimsuit",category:"clothing"},{name:"Flip flops",category:"clothing"},{name:"Sunglasses",category:"accessories"},{name:"Sunscreen",category:"toiletries"},{name:"Beach towel",category:"other"},{name:"Hat/Cap",category:"accessories"},{name:"Shorts",category:"clothing",quantity:3},{name:"T-shirts",category:"clothing",quantity:4},{name:"Sandals",category:"clothing"},{name:"Aloe vera gel",category:"toiletries"}]},{name:"Business",icon:"\uD83D\uDCBC",items:[{name:"Dress shirts",category:"clothing",quantity:3},{name:"Dress pants",category:"clothing",quantity:2},{name:"Blazer/Jacket",category:"clothing"},{name:"Dress shoes",category:"clothing"},{name:"Tie",category:"accessories"},{name:"Belt",category:"accessories"},{name:"Laptop",category:"electronics"},{name:"Laptop charger",category:"electronics"},{name:"Business cards",category:"documents"},{name:"Portfolio/Notebook",category:"other"}]},{name:"Winter",icon:"❄️",items:[{name:"Heavy coat",category:"clothing"},{name:"Sweaters",category:"clothing",quantity:3},{name:"Thermal underwear",category:"clothing"},{name:"Winter boots",category:"clothing"},{name:"Gloves",category:"accessories"},{name:"Scarf",category:"accessories"},{name:"Beanie/Winter hat",category:"accessories"},{name:"Warm socks",category:"clothing",quantity:5},{name:"Lip balm",category:"toiletries"},{name:"Hand warmers",category:"other"}]},{name:"Essentials",icon:"✈️",items:[{name:"Passport",category:"documents"},{name:"Phone charger",category:"electronics"},{name:"Toothbrush",category:"toiletries"},{name:"Toothpaste",category:"toiletries"},{name:"Deodorant",category:"toiletries"},{name:"Underwear",category:"clothing",quantity:5},{name:"Socks",category:"clothing",quantity:5},{name:"Medications",category:"toiletries"},{name:"Wallet",category:"accessories"},{name:"Headphones",category:"electronics"}]}],q="foldr_expenses";function K(e){let t=localStorage.getItem(q),a=t?JSON.parse(t):[];return e?a.filter(t=>t.tripId===e).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()):a.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())}function M(e){let t=localStorage.getItem(q),a=t?JSON.parse(t):[],o=a.findIndex(t=>t.id===e.id);o>=0?a[o]=e:a.push(e),localStorage.setItem(q,JSON.stringify(a)),d()}function j(e){s("expenses",e);let t=localStorage.getItem(q),a=t?JSON.parse(t):[];localStorage.setItem(q,JSON.stringify(a.filter(t=>t.id!==e))),d()}let z=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"€",name:"Euro"},{code:"GBP",symbol:"\xa3",name:"British Pound"},{code:"JPY",symbol:"\xa5",name:"Japanese Yen"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CHF",symbol:"Fr",name:"Swiss Franc"},{code:"CNY",symbol:"\xa5",name:"Chinese Yuan"},{code:"INR",symbol:"₹",name:"Indian Rupee"},{code:"MXN",symbol:"Mex$",name:"Mexican Peso"},{code:"BRL",symbol:"R$",name:"Brazilian Real"},{code:"KRW",symbol:"₩",name:"Korean Won"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"THB",symbol:"฿",name:"Thai Baht"}],F=[{value:"transport",label:"Transport",icon:"\uD83D\uDE97"},{value:"accommodation",label:"Accommodation",icon:"\uD83C\uDFE8"},{value:"food",label:"Food & Drink",icon:"\uD83C\uDF7D️"},{value:"activities",label:"Activities",icon:"\uD83C\uDFAF"},{value:"shopping",label:"Shopping",icon:"\uD83D\uDECD️"},{value:"other",label:"Other",icon:"\uD83D\uDCE6"}]}}]);