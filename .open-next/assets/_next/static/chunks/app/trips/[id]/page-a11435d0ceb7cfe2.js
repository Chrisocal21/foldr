(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[245],{885:(e,t,s)=>{"use strict";s.d(t,{L:()=>i});var a=s(12115);function l(e){return window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}}function r(){return navigator.onLine}function n(){return!0}function i(){return(0,a.useSyncExternalStore)(l,r,n)}},53909:(e,t,s)=>{Promise.resolve().then(s.bind(s,76036))},70913:(e,t,s)=>{"use strict";s.d(t,{SettingsProvider:()=>o,V:()=>d,t:()=>c});var a=s(95155),l=s(12115);let r={temperatureUnit:"fahrenheit",distanceUnit:"miles",dateFormat:"mdy",timeFormat:"12h",defaultCurrency:"USD",firstDayOfWeek:"sunday",weatherForecastDays:5,mapDefaultZoom:12,compactMode:!1,showTripCountdown:!0,tripSortOrder:"date",defaultTripDuration:7,autoArchiveDays:0,defaultAirline:"",defaultHotelChain:"",homeAirport:""},n="foldr_settings",i=(0,l.createContext)(null);function o(e){let{children:t}=e,[s,o]=(0,l.useState)(r),[c,d]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{{let e=localStorage.getItem(n);if(e)try{let t=JSON.parse(e);o({...r,...t})}catch(e){}d(!0)}},[]),(0,l.useEffect)(()=>{c&&localStorage.setItem(n,JSON.stringify(s))},[s,c]),(0,a.jsx)(i.Provider,{value:{settings:s,updateSettings:e=>{o(t=>({...t,...e}))},formatTemperature:e=>{if("fahrenheit"===s.temperatureUnit){let t=Math.round(9*e/5+32);return"".concat(t,"\xb0F")}return"".concat(Math.round(e),"\xb0C")},formatDistance:e=>{if("miles"===s.distanceUnit){let t=.621371*e;return"".concat(t.toFixed(1)," mi")}return"".concat(e.toFixed(1)," km")},formatDate:e=>{if(!e)return"";let[t]=e.split("T"),[a,l,r]=t.split("-").map(Number),n=new Date(a,l-1,r);switch(s.dateFormat){case"dmy":return n.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});case"ymd":return n.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"});default:return n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}},formatTime:e=>{let t,a;if(!e)return"";if(e.includes("T")){let s=e.split("T")[1];[t,a]=s.split(":").map(Number)}else[t,a]=e.split(":").map(Number);if("24h"===s.timeFormat)return"".concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"));let l=t>=12?"PM":"AM",r=t%12||12;return"".concat(r,":").concat(a.toString().padStart(2,"0")," ").concat(l)},exportData:()=>{let e=new Blob([JSON.stringify({version:"1.0",exportedAt:new Date().toISOString(),trips:localStorage.getItem("foldr_trips"),blocks:localStorage.getItem("foldr_blocks"),todos:localStorage.getItem("foldr_todos"),packingItems:localStorage.getItem("foldr_packing_items"),expenses:localStorage.getItem("foldr_expenses"),settings:localStorage.getItem("foldr_settings")},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="foldr-backup-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},importData:e=>{try{let t=JSON.parse(e);if(t.trips&&localStorage.setItem("foldr_trips",t.trips),t.blocks&&localStorage.setItem("foldr_blocks",t.blocks),t.todos&&localStorage.setItem("foldr_todos",t.todos),t.packingItems&&localStorage.setItem("foldr_packing_items",t.packingItems),t.expenses&&localStorage.setItem("foldr_expenses",t.expenses),t.settings){localStorage.setItem("foldr_settings",t.settings);let e=JSON.parse(t.settings);o({...r,...e})}return!0}catch(e){return!1}},clearAllData:()=>{localStorage.removeItem("foldr_trips"),localStorage.removeItem("foldr_blocks"),localStorage.removeItem("foldr_todos"),localStorage.removeItem("foldr_packing_items"),localStorage.removeItem("foldr_expenses"),localStorage.removeItem("foldr_settings"),localStorage.removeItem("foldr_logged_in"),o(r)}},children:t})}function c(){let e=(0,l.useContext)(i);if(!e)throw Error("useSettings must be used within a SettingsProvider");return e}let d=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"€",name:"Euro"},{code:"GBP",symbol:"\xa3",name:"British Pound"},{code:"JPY",symbol:"\xa5",name:"Japanese Yen"},{code:"CNY",symbol:"\xa5",name:"Chinese Yuan"},{code:"KRW",symbol:"₩",name:"South Korean Won"},{code:"INR",symbol:"₹",name:"Indian Rupee"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CHF",symbol:"CHF",name:"Swiss Franc"},{code:"MXN",symbol:"MX$",name:"Mexican Peso"},{code:"BRL",symbol:"R$",name:"Brazilian Real"},{code:"THB",symbol:"฿",name:"Thai Baht"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"}]},76036:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>W});var a=s(95155),l=s(12115),r=s(35695),n=s(6874),i=s.n(n),o=s(98319);function c(e){let{value:t,label:s,className:r=""}=e,[n,i]=(0,l.useState)(!1),o=async()=>{try{await navigator.clipboard.writeText(t),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){}};return(0,a.jsxs)("button",{onClick:o,className:"text-left w-full hover:bg-slate-700/50 rounded px-2 py-1 -mx-2 transition-colors relative group ".concat(r),children:[s&&(0,a.jsx)("div",{className:"text-xs text-slate-500 mb-0.5",children:s}),(0,a.jsxs)("div",{className:"text-slate-200 flex items-center justify-between gap-2",children:[(0,a.jsx)("span",{className:"truncate",children:t}),(0,a.jsx)("span",{className:"shrink-0 flex items-center",children:n?(0,a.jsxs)("span",{className:"flex items-center gap-1 text-green-400 text-xs font-medium",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M5 13l4 4L19 7"})}),"Copied!"]}):(0,a.jsxs)("svg",{className:"w-4 h-4 text-slate-500 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2"}),(0,a.jsx)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})]})]})}let d={clothing:{label:"Clothing",icon:"\uD83D\uDC55"},toiletries:{label:"Toiletries",icon:"\uD83E\uDDF4"},electronics:{label:"Electronics",icon:"\uD83D\uDD0C"},documents:{label:"Documents",icon:"\uD83D\uDCC4"},accessories:{label:"Accessories",icon:"\uD83D\uDC5C"},other:{label:"Other",icon:"\uD83D\uDCE6"}};function x(e){let{tripId:t}=e,[s,r]=(0,l.useState)([]),[n,i]=(0,l.useState)(""),[c,x]=(0,l.useState)("clothing"),[m,h]=(0,l.useState)(!1),[u,p]=(0,l.useState)(!1),[g,b]=(0,l.useState)("all");(0,l.useEffect)(()=>{v()},[t]);let v=()=>{r((0,o.w0)(t))},j=Object.entries(s.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{})).reduce((e,t)=>{let[s,a]=t,l=a.filter(e=>"packed"===g?e.packed:"unpacked"!==g||!e.packed);return l.length>0&&(e[s]=l),e},{}),f=s.filter(e=>e.packed).length,N=s.length,w=N>0?f/N*100:0;return(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:"\uD83C\uDF92 Packing List"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>p(!u),className:"text-xs px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg transition-colors",children:"+ Template"}),(0,a.jsx)("button",{onClick:()=>h(!m),className:"text-xs px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"+ Item"})]})]}),N>0&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[(0,a.jsxs)("span",{children:[f," of ",N," packed"]}),(0,a.jsxs)("span",{children:[Math.round(w),"%"]})]}),(0,a.jsx)("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:"".concat(w,"%")}})})]}),N>0&&(0,a.jsx)("div",{className:"flex gap-2",children:["all","unpacked","packed"].map(e=>(0,a.jsx)("button",{onClick:()=>b(e),className:"text-xs px-3 py-1 rounded-lg transition-colors ".concat(g===e?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:text-slate-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),u&&(0,a.jsxs)("div",{className:"p-4 border-b border-slate-700 bg-slate-800/50",children:[(0,a.jsx)("p",{className:"text-xs text-slate-400 mb-2",children:"Add items from a template:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:o.Oy.map((e,s)=>(0,a.jsxs)("button",{onClick:()=>(e=>{let s=o.Oy[e];(0,o.XN)(t,s.items),p(!1),v()})(s),className:"px-3 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-sm text-white transition-colors",children:[e.icon," ",e.name]},e.name))})]}),m&&(0,a.jsx)("form",{onSubmit:e=>{if(e.preventDefault(),!n.trim())return;let s={id:crypto.randomUUID(),tripId:t,name:n.trim(),category:c,packed:!1,createdAt:new Date().toISOString()};(0,o.GG)(s),i(""),h(!1),v()},className:"p-4 border-b border-slate-700 bg-slate-800/50",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Item name...",className:"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),(0,a.jsx)("select",{value:c,onChange:e=>x(e.target.value),className:"bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:Object.entries(d).map(e=>{let[t,{label:s,icon:l}]=e;return(0,a.jsxs)("option",{value:t,children:[l," ",s]},t)})}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors",children:"Add"})]})}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===s.length?(0,a.jsxs)("div",{className:"p-8 text-center text-slate-500",children:[(0,a.jsx)("p",{className:"mb-2",children:"No items yet"}),(0,a.jsx)("p",{className:"text-xs",children:"Add items or use a template to get started"})]}):0===Object.keys(j).length?(0,a.jsx)("div",{className:"p-8 text-center text-slate-500",children:(0,a.jsxs)("p",{children:["No ",g," items"]})}):Object.entries(j).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"border-b border-slate-700 last:border-0",children:[(0,a.jsxs)("div",{className:"px-4 py-2 bg-slate-800/30 flex items-center gap-2",children:[(0,a.jsx)("span",{children:d[t].icon}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-300",children:d[t].label}),(0,a.jsxs)("span",{className:"text-xs text-slate-500",children:["(",s.filter(e=>e.packed).length,"/",s.length,")"]})]}),s.map(e=>(0,a.jsxs)("div",{className:"px-4 py-2 flex items-center gap-3 hover:bg-slate-700/30 transition-colors ".concat(e.packed?"opacity-60":""),children:[(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void((0,o.$O)(t),v())},className:"w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ".concat(e.packed?"bg-green-500 border-green-500 text-white":"border-slate-500 hover:border-green-500"),children:e.packed&&(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",strokeWidth:"3",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M5 13l4 4L19 7"})})}),(0,a.jsxs)("span",{className:"flex-1 text-sm ".concat(e.packed?"text-slate-500 line-through":"text-white"),children:[e.name,e.quantity&&e.quantity>1&&(0,a.jsxs)("span",{className:"text-slate-500 ml-1",children:["\xd7",e.quantity]})]}),(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void((0,o.Kv)(t),v())},className:"p-1 text-slate-500 hover:text-red-400 transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M6 18L18 6M6 6l12 12"})})})]},e.id))]},t)})})]})}var m=s(70913);function h(e){let{tripId:t}=e,{settings:s}=(0,m.t)(),[r,n]=(0,l.useState)([]),[i,c]=(0,l.useState)(!1),[d,x]=(0,l.useState)(null),[h,u]=(0,l.useState)({description:"",amount:"",currency:s.defaultCurrency,category:"other",date:new Date().toISOString().split("T")[0]});(0,l.useEffect)(()=>{p()},[t]);let p=()=>{n((0,o.ck)(t))},g=(e,t)=>{var s;return"".concat((null==(s=o.yR.find(e=>e.code===t))?void 0:s.symbol)||t).concat(e.toFixed(2))},b=r.reduce((e,t)=>(e[t.currency]||(e[t.currency]=0),e[t.currency]+=t.amount,e),{}),v=r.reduce((e,t)=>(e[t.category]||(e[t.category]=0),e[t.category]+=t.amount,e),{}),j=e=>o.K8.find(t=>t.value===e)||{label:e,icon:"\uD83D\uDCE6"};return(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:"\uD83D\uDCB0 Expenses"}),(0,a.jsx)("button",{onClick:()=>c(!i),className:"text-xs px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"+ Add"})]}),Object.keys(b).length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:Object.entries(b).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"bg-slate-700/50 rounded-lg px-3 py-2",children:[(0,a.jsx)("div",{className:"text-xs text-slate-400",children:t}),(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:g(s,t)})]},t)})})]}),i&&(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!h.description.trim()||!h.amount)return;let s={id:crypto.randomUUID(),tripId:t,description:h.description.trim(),amount:parseFloat(h.amount),currency:h.currency,category:h.category,date:h.date,createdAt:new Date().toISOString()};(0,o.aU)(s),u({description:"",amount:"",currency:h.currency,category:"other",date:new Date().toISOString().split("T")[0]}),c(!1),p()},className:"p-4 border-b border-slate-700 bg-slate-800/50 space-y-3",children:[(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("input",{type:"text",value:h.description,onChange:e=>u({...h,description:e.target.value}),placeholder:"Description...",className:"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)("div",{className:"flex-1 flex gap-2",children:[(0,a.jsx)("select",{value:h.currency,onChange:e=>u({...h,currency:e.target.value}),className:"bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:o.yR.map(e=>(0,a.jsxs)("option",{value:e.code,children:[e.symbol," ",e.code]},e.code))}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",value:h.amount,onChange:e=>u({...h,amount:e.target.value}),placeholder:"0.00",className:"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("select",{value:h.category,onChange:e=>u({...h,category:e.target.value}),className:"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:o.K8.map(e=>(0,a.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value))}),(0,a.jsx)("input",{type:"date",value:h.date,onChange:e=>u({...h,date:e.target.value}),className:"bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>c(!1),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg text-sm transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors",children:"Add Expense"})]})]}),Object.keys(v).length>1&&(0,a.jsxs)("div",{className:"p-4 border-b border-slate-700",children:[(0,a.jsx)("p",{className:"text-xs text-slate-400 mb-2",children:"By Category"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(v).map(e=>{let[t,s]=e,l=j(t);return(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs bg-slate-700/50 rounded px-2 py-1",children:[(0,a.jsx)("span",{children:l.icon}),(0,a.jsxs)("span",{className:"text-slate-400",children:[l.label,":"]}),(0,a.jsxs)("span",{className:"text-white font-medium",children:["$",s.toFixed(0)]})]},t)})})]}),(0,a.jsx)("div",{className:"max-h-80 overflow-y-auto",children:0===r.length?(0,a.jsxs)("div",{className:"p-8 text-center text-slate-500",children:[(0,a.jsx)("p",{className:"mb-2",children:"No expenses yet"}),(0,a.jsx)("p",{className:"text-xs",children:"Track your trip spending"})]}):r.map(e=>{let t=j(e.category);return(0,a.jsx)("div",{className:"px-4 py-3 border-b border-slate-700 last:border-0 hover:bg-slate-700/30 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-lg",children:t.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white text-sm font-medium",children:e.description}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:[t.label," • ",new Date(e.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-white font-semibold",children:g(e.amount,e.currency)}),(0,a.jsx)("button",{onClick:()=>x(e.id),className:"p-1 text-slate-500 hover:text-red-400 transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M6 18L18 6M6 6l12 12"})})})]})]})},e.id)})}),d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:(0,a.jsxs)("div",{className:"bg-slate-800 rounded-xl p-5 w-full max-w-sm shadow-xl border border-slate-700",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"Delete Expense?"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm mb-4",children:"This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>x(null),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{(0,o.Wz)(d),x(null),p()},className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Delete"})]})]})})]})}function u(e){if(!e)return"";let[t,s,a]=e.split("T")[0].split("-").map(Number);return t&&s&&a?new Date(t,s-1,a).toLocaleDateString():e}function p(e){if(!e)return"";let[t,s]=e.split("T");if(!t||!s)return e;let[a,l,r]=t.split("-").map(Number),[n,i]=s.split(":").map(Number);return new Date(a,l-1,r,n,i).toLocaleString()}function g(e){let{block:t,onDelete:s,onDuplicate:r,isFirst:n,isLast:c}=e,[d,x]=(0,l.useState)(!1),[m,h]=(0,l.useState)(!1),u="block-collapsed-".concat(t.id),[p,g]=(0,l.useState)(()=>"true"===localStorage.getItem(u)),S=e=>{g(e),e?localStorage.setItem(u,"true"):localStorage.removeItem(u)},D=function(e){switch(e){case"flight":return{color:"blue",icon:(0,a.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2Z"})})};case"hotel":return{color:"purple",icon:(0,a.jsx)("svg",{className:"w-4 h-4 text-purple-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M3 21h18M4 21V7a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v14M14 21V10a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v11"})})};case"layover":return{color:"yellow",icon:(0,a.jsxs)("svg",{className:"w-4 h-4 text-yellow-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("path",{d:"M12 6v6l4 2"})]})};case"work":return{color:"orange",icon:(0,a.jsxs)("svg",{className:"w-4 h-4 text-orange-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("rect",{x:"3",y:"7",width:"18",height:"13",rx:"2"}),(0,a.jsx)("path",{d:"M8 7V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})};case"transport":return{color:"green",icon:(0,a.jsxs)("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M5 17a2 2 0 1 0 4 0 2 2 0 1 0-4 0Zm10 0a2 2 0 1 0 4 0 2 2 0 1 0-4 0Z"}),(0,a.jsx)("path",{d:"M5 17H3v-5l2-5h9l4 5v5h-2m-7-9 1.5 4.5H9L7.5 8Z"})]})};case"screenshot":return{color:"indigo",icon:(0,a.jsxs)("svg",{className:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2Z"}),(0,a.jsx)("circle",{cx:"12",cy:"13",r:"3"})]})};case"note":return{color:"slate",icon:(0,a.jsxs)("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2Z"}),(0,a.jsx)("path",{d:"M14 2v6h6M16 13H8M16 17H8M10 9H8"})]})};case"packing":return{color:"emerald",icon:(0,a.jsxs)("svg",{className:"w-4 h-4 text-emerald-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"}),(0,a.jsx)("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),(0,a.jsx)("path",{d:"M9 12l2 2 4-4"})]})};case"expense":return{color:"amber",icon:(0,a.jsx)("svg",{className:"w-4 h-4 text-amber-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"})})};default:return{color:"slate",icon:null}}}(t.type),M=function(e){switch(e.type){case"flight":return{title:"Flight",subtitle:"".concat(e.airline," ").concat(e.flightNumber," \xb7 ").concat(e.departureAirport," → ").concat(e.arrivalAirport)};case"hotel":return{title:"Hotel",subtitle:e.name};case"layover":return{title:"Layover",subtitle:e.location};case"work":return{title:"Work",subtitle:e.siteName};case"transport":return{title:"Transport",subtitle:"".concat(e.transportType," \xb7 ").concat(e.pickupLocation)};case"screenshot":return{title:"Screenshot",subtitle:e.caption||"Image"};case"note":return{title:"Note",subtitle:e.title||e.text.slice(0,50)+(e.text.length>50?"...":"")};case"packing":return{title:"Packing List",subtitle:e.title||"Packing List"};case"expense":return{title:"Expenses",subtitle:e.title||"Expense Tracker"};default:return{title:"Block",subtitle:""}}}(t),T=()=>{(0,o.t5)(t.id),x(!1),null==r||r()};return p?(0,a.jsx)("div",{className:"relative group",children:(0,a.jsxs)("div",{onClick:()=>S(!1),className:"bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 flex items-center gap-3 cursor-pointer hover:bg-slate-700/50 transition-colors",children:[(0,a.jsx)("div",{className:"bg-".concat(D.color,"-600/20 p-1.5 rounded-lg"),children:D.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("span",{className:"text-white font-medium",children:M.title}),(0,a.jsx)("span",{className:"text-slate-500 mx-2",children:"\xb7"}),(0,a.jsx)("span",{className:"text-slate-400 text-sm truncate",children:M.subtitle})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),x(!d)},className:"text-slate-500 hover:text-slate-300 p-1 transition-colors",title:"More options",children:(0,a.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"6",r:"1",fill:"currentColor"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"1",fill:"currentColor"}),(0,a.jsx)("circle",{cx:"12",cy:"18",r:"1",fill:"currentColor"})]})})}),d&&(0,a.jsxs)("div",{className:"absolute right-2 top-12 bg-slate-800 border border-slate-700 rounded-lg shadow-xl overflow-hidden min-w-[120px] z-20",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),S(!1),x(!1)},className:"w-full text-left px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 transition-colors",children:"Expand"}),(0,a.jsx)(i(),{href:"/trips/".concat(t.tripId,"/edit-block/").concat(t.id),className:"block px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 transition-colors",children:"Edit"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),T()},className:"w-full text-left px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 transition-colors",children:"Duplicate"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),h(!0),x(!1)},className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-slate-700 transition-colors",children:"Delete"})]})]})}):(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),x(!d)},className:"bg-slate-800/90 hover:bg-slate-700 text-slate-300 p-1.5 rounded backdrop-blur-sm transition-colors",title:"More options",children:(0,a.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"6",r:"1",fill:"currentColor"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"1",fill:"currentColor"}),(0,a.jsx)("circle",{cx:"12",cy:"18",r:"1",fill:"currentColor"})]})}),d&&(0,a.jsxs)("div",{className:"absolute right-0 mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-xl overflow-hidden min-w-[120px]",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),S(!0),x(!1)},className:"w-full text-left px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 transition-colors",children:"Minimize"}),(0,a.jsx)(i(),{href:"/trips/".concat(t.tripId,"/edit-block/").concat(t.id),className:"block px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 transition-colors",children:"Edit"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),T()},className:"w-full text-left px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 transition-colors",children:"Duplicate"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),h(!0),x(!1)},className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-slate-700 transition-colors",children:"Delete"})]})]})}),(()=>{switch(t.type){case"flight":return(0,a.jsx)(b,{block:t});case"hotel":return(0,a.jsx)(v,{block:t});case"layover":return(0,a.jsx)(w,{block:t});case"work":return(0,a.jsx)(j,{block:t});case"transport":return(0,a.jsx)(f,{block:t});case"screenshot":return(0,a.jsx)(y,{block:t});case"note":return(0,a.jsx)(N,{block:t});case"packing":return(0,a.jsx)(k,{block:t});case"expense":return(0,a.jsx)(C,{block:t});default:return null}})(),m&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>h(!1),children:(0,a.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 w-full max-w-sm shadow-xl border border-slate-700",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"bg-red-500/20 p-2 rounded-full",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Delete Block"})]}),(0,a.jsxs)("p",{className:"text-slate-300 mb-6",children:["Are you sure you want to delete this ",(0,a.jsx)("span",{className:"font-semibold text-white",children:M.title.toLowerCase()}),"? This action cannot be undone."]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,a.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 rounded-lg bg-slate-700 text-white hover:bg-slate-600 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{null==s||s(t.id),h(!1),x(!1)},className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}function b(e){let{block:t}=e;return(0,a.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-blue-600/20 p-2 rounded-lg",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2Z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Flight"}),(0,a.jsxs)("p",{className:"text-sm text-slate-400",children:[t.airline," ",t.flightNumber]})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(c,{label:"Depart",value:"".concat(t.departureAirport," ").concat(t.departureTime)})}),(0,a.jsx)("div",{children:(0,a.jsx)(c,{label:"Arrive",value:"".concat(t.arrivalAirport," ").concat(t.arrivalTime)})})]}),t.confirmationNumber&&(0,a.jsx)(c,{label:"Confirmation",value:t.confirmationNumber}),t.seat&&(0,a.jsx)(c,{label:"Seat",value:t.seat}),(t.terminal||t.gate)&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[t.terminal&&(0,a.jsx)(c,{label:"Terminal",value:t.terminal}),t.gate&&(0,a.jsx)(c,{label:"Gate",value:t.gate})]}),t.notes&&(0,a.jsx)("div",{className:"text-sm text-slate-400 mt-3 pt-3 border-t border-slate-700",children:t.notes})]})]})}function v(e){let{block:t}=e;return(0,a.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-purple-600/20 p-2 rounded-lg",children:(0,a.jsxs)("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M3 21h18M4 21V7a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v14M14 21V10a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v11"}),(0,a.jsx)("path",{d:"M8 14h.01M8 10h.01M16 14h.01"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Hotel"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:t.name})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(c,{label:"Address",value:t.address}),(0,a.jsx)(c,{label:"Phone",value:t.phone}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(c,{label:"Check-in",value:u(t.checkInDate)}),(0,a.jsx)(c,{label:"Check-out",value:u(t.checkOutDate)})]}),t.confirmationNumber&&(0,a.jsx)(c,{label:"Confirmation",value:t.confirmationNumber}),t.notes&&(0,a.jsx)("div",{className:"text-sm text-slate-400 mt-3 pt-3 border-t border-slate-700",children:t.notes})]})]})}function j(e){let{block:t}=e;return(0,a.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-orange-600/20 p-2 rounded-lg",children:(0,a.jsxs)("svg",{className:"w-5 h-5 text-orange-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("rect",{x:"3",y:"7",width:"18",height:"13",rx:"2"}),(0,a.jsx)("path",{d:"M8 7V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Work"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:t.siteName})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(c,{label:"Address",value:t.address}),t.contactName&&(0,a.jsx)(c,{label:"Contact",value:t.contactName}),t.contactPhone&&(0,a.jsx)(c,{label:"Phone",value:t.contactPhone}),t.contactEmail&&(0,a.jsx)(c,{label:"Email",value:t.contactEmail}),t.notes&&(0,a.jsx)("div",{className:"text-sm text-slate-400 mt-3 pt-3 border-t border-slate-700",children:t.notes})]})]})}function f(e){let{block:t}=e;return(0,a.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-green-600/20 p-2 rounded-lg",children:(0,a.jsxs)("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M5 17a2 2 0 1 0 4 0 2 2 0 1 0-4 0Zm10 0a2 2 0 1 0 4 0 2 2 0 1 0-4 0Z"}),(0,a.jsx)("path",{d:"M5 17H3v-5l2-5h9l4 5v5h-2m-7-9 1.5 4.5H9L7.5 8Z"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Transportation"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:t.transportType})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[t.company&&(0,a.jsx)(c,{label:"Company",value:t.company}),(0,a.jsx)(c,{label:"Pickup",value:"".concat(t.pickupLocation," - ").concat(p(t.pickupDateTime))}),(0,a.jsx)(c,{label:"Dropoff",value:"".concat(t.dropoffLocation," - ").concat(p(t.dropoffDateTime))}),t.confirmationNumber&&(0,a.jsx)(c,{label:"Confirmation",value:t.confirmationNumber}),t.notes&&(0,a.jsx)("div",{className:"text-sm text-slate-400 mt-3 pt-3 border-t border-slate-700",children:t.notes})]})]})}function N(e){let{block:t}=e;return(0,a.jsx)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,a.jsx)("div",{className:"bg-slate-600/20 p-2 rounded-lg",children:(0,a.jsxs)("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2Z"}),(0,a.jsx)("path",{d:"M14 2v6h6M16 13H8M16 17H8M10 9H8"})]})}),(0,a.jsxs)("div",{className:"flex-1",children:[t.title&&(0,a.jsx)("h3",{className:"text-white font-semibold mb-2",children:t.title}),(0,a.jsx)("p",{className:"text-slate-300 whitespace-pre-wrap",children:t.text})]})]})})}function w(e){let{block:t}=e,s=new Date(t.arrivalTime),l=new Date(t.departureTime).getTime()-s.getTime(),r=Math.floor(l/36e5),n=Math.floor(l%36e5/6e4);return(0,a.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-yellow-600/20 p-2 rounded-lg",children:(0,a.jsxs)("svg",{className:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("path",{d:"M12 6v6l4 2"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Layover"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:t.location})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(c,{label:"Arrival",value:p(t.arrivalTime)}),(0,a.jsx)(c,{label:"Departure",value:p(t.departureTime)})]}),(0,a.jsxs)("div",{className:"bg-slate-900/50 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Duration"}),(0,a.jsxs)("div",{className:"text-slate-200 font-medium",children:[r>0&&"".concat(r,"h "),n,"m"]})]}),t.terminal&&(0,a.jsx)(c,{label:"Terminal",value:t.terminal}),t.notes&&(0,a.jsx)("div",{className:"text-sm text-slate-400 mt-3 pt-3 border-t border-slate-700",children:t.notes})]})]})}function y(e){let{block:t}=e,[s,r]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,a.jsx)("div",{className:"bg-indigo-600/20 p-2 rounded-lg",children:(0,a.jsxs)("svg",{className:"w-5 h-5 text-indigo-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2Z"}),(0,a.jsx)("circle",{cx:"12",cy:"13",r:"3"})]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Screenshot"}),t.caption&&(0,a.jsx)("p",{className:"text-slate-300 text-sm mb-3",children:t.caption})]})]}),(0,a.jsx)("div",{className:"rounded-lg overflow-hidden bg-slate-900 mb-4",children:(0,a.jsx)("img",{src:t.imageData,alt:t.caption||"Screenshot",className:"w-full h-auto"})}),t.extractedText&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("button",{onClick:()=>r(!s),className:"flex items-center gap-2 text-sm text-indigo-400 hover:text-indigo-300 transition-colors",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s?(0,a.jsx)("path",{d:"m18 15-6-6-6 6"}):(0,a.jsx)("path",{d:"m6 9 6 6 6-6"})}),s?"Hide":"Show"," extracted text"]}),s&&(0,a.jsx)("div",{className:"bg-slate-900/50 rounded-lg p-4",children:(0,a.jsx)(c,{label:"Extracted Text",value:t.extractedText})})]})]})}function k(e){let{block:t}=e;return(0,a.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 border-b border-slate-700",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-emerald-600/20 p-2 rounded-lg",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-emerald-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Packing List"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Track what to pack for your trip"})]})]})}),(0,a.jsx)("div",{className:"p-0",children:(0,a.jsx)(x,{tripId:t.tripId})})]})}function C(e){let{block:t}=e;return(0,a.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 border-b border-slate-700",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-amber-600/20 p-2 rounded-lg",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-amber-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Expense Tracker"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Track your trip expenses"})]})]})}),(0,a.jsx)("div",{className:"p-0",children:(0,a.jsx)(h,{tripId:t.tripId})})]})}var S=s(26597);function D(e){if(!e)return"";let[t,s,a]=e.split("T")[0].split("-").map(Number);return t&&s&&a?new Date(t,s-1,a).toLocaleDateString():e}function M(e){if(!e)return"";let[t,s]=e.split("T");if(!t||!s)return e;let[a,l,r]=t.split("-").map(Number),[n,i]=s.split(":").map(Number);return new Date(a,l-1,r,n,i).toLocaleString()}var T=s(45900);s(68413);var L=s(885);function z(e){let{latitude:t,longitude:r,destination:n,className:i=""}=e,o=(0,l.useRef)(null),c=(0,l.useRef)(null),[d,x]=(0,l.useState)(!1),[h,u]=(0,l.useState)(!1),p=(0,L.L)(),{settings:g}=(0,m.t)();return((0,l.useEffect)(()=>{if(o.current&&p&&!c.current)return(async()=>{try{let e=(await s.e(761).then(s.t.bind(s,85752,23))).default;if(!o.current||c.current)return;let a=e.map(o.current,{scrollWheelZoom:!1,zoomControl:!0}).setView([t,r],g.mapDefaultZoom),l=e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'});l.on("tileerror",()=>{navigator.onLine||u(!0)}),l.addTo(a);let i=e.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),d=e.marker([t,r],{icon:i}).addTo(a);n&&d.bindPopup("<b>".concat(n,"</b>")),c.current=a,x(!0),setTimeout(()=>{a.invalidateSize()},100)}catch(e){u(!0)}})(),()=>{c.current&&(c.current.remove(),c.current=null)}},[t,r,n,p,g.mapDefaultZoom]),!p||h)?(0,a.jsx)("div",{className:"rounded-xl overflow-hidden ".concat(i),style:{minHeight:"200px",height:"200px"},children:(0,a.jsxs)("div",{className:"h-full w-full bg-slate-800 flex flex-col items-center justify-center text-slate-500",children:[(0,a.jsxs)("svg",{className:"w-8 h-8 mb-2 text-slate-600",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M17.657 16.657L13.414 20.9a2 2 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,a.jsx)("path",{d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,a.jsx)("span",{className:"text-sm",children:"Map unavailable offline"}),n&&(0,a.jsx)("span",{className:"text-xs text-slate-600 mt-1",children:n})]})}):(0,a.jsx)("div",{className:"rounded-xl overflow-hidden ".concat(i),style:{minHeight:"200px",height:"200px"},children:(0,a.jsx)("div",{ref:o,style:{height:"200px",width:"100%"},children:!d&&(0,a.jsx)("div",{className:"h-full w-full bg-slate-800 flex items-center justify-center text-slate-500",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 2v4m0 12v4m-7-7H2m20 0h-3m-2.5-7.5L14 7m-4 10-2.5 2.5M17.5 17.5 15 15M6.5 6.5 9 9"})}),"Loading map..."]})})})})}function B(e){let{latitude:t,longitude:s,destination:r,className:n=""}=e,{settings:i}=(0,m.t)(),[o,c]=(0,l.useState)([]),[d,x]=(0,l.useState)(!0),[h,u]=(0,l.useState)(null),[p,g]=(0,l.useState)(!1),b=e=>{if("fahrenheit"===i.temperatureUnit){let t=Math.round(9*e/5+32);return"".concat(t,"\xb0F")}return"".concat(Math.round(e),"\xb0C")},v=async()=>{x(!0),u(null);try{let e=await fetch("https://api.open-meteo.com/v1/forecast?"+"latitude=".concat(t,"&longitude=").concat(s,"&")+"daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=auto&"+"forecast_days=".concat(i.weatherForecastDays),{signal:AbortSignal.timeout(1e4)});if(!e.ok)throw Error("Weather data unavailable");let a=await e.json(),l=a.daily.time.map((e,t)=>{var s;return{date:e,temp:Math.round((a.daily.temperature_2m_max[t]+a.daily.temperature_2m_min[t])/2),tempMin:Math.round(a.daily.temperature_2m_min[t]),tempMax:Math.round(a.daily.temperature_2m_max[t]),description:({0:"Clear",1:"Mainly Clear",2:"Partly Cloudy",3:"Overcast",45:"Fog",48:"Fog",51:"Light Drizzle",53:"Drizzle",55:"Heavy Drizzle",56:"Freezing Drizzle",57:"Freezing Drizzle",61:"Light Rain",63:"Rain",65:"Heavy Rain",66:"Freezing Rain",67:"Freezing Rain",71:"Light Snow",73:"Snow",75:"Heavy Snow",77:"Snow Grains",80:"Light Showers",81:"Showers",82:"Heavy Showers",85:"Snow Showers",86:"Heavy Snow Showers",95:"Thunderstorm",96:"Thunderstorm",99:"Thunderstorm"})[a.daily.weather_code[t]]||"Unknown",icon:(s=a.daily.weather_code[t],0===s?"☀️":s<=2?"\uD83C\uDF24️":3===s?"☁️":s<=48?"\uD83C\uDF2B️":s<=57||s<=67?"\uD83C\uDF27️":s<=77?"❄️":s<=82?"\uD83C\uDF27️":s<=86?"\uD83C\uDF28️":s>=95?"⛈️":"\uD83C\uDF21️")}});c(l)}catch(e){navigator.onLine?u("Unable to load weather"):g(!0)}finally{x(!1)}};return((0,l.useEffect)(()=>{let e=()=>g(!1),t=()=>g(!0);if(window.addEventListener("online",e),window.addEventListener("offline",t),!navigator.onLine){g(!0),x(!1);return}return v(),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[t,s,i.weatherForecastDays]),p)?(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50 ".concat(n),children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})}),"Weather"]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-slate-400 py-4",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M18.364 5.636a9 9 0 11-12.728 12.728 9 9 0 0112.728-12.728zM15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{children:"Weather unavailable offline"})]})]}):d?(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50 ".concat(n),children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})}),"Weather"]}),(0,a.jsx)("div",{className:"flex items-center justify-center py-6",children:(0,a.jsx)("svg",{className:"w-6 h-6 animate-spin text-slate-500",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 2v4m0 12v4m-7-7H2m20 0h-3m-2.5-7.5L14 7m-4 10-2.5 2.5M17.5 17.5 15 15M6.5 6.5 9 9"})})})]}):h?(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50 ".concat(n),children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})}),"Weather"]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-slate-400 py-4",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,a.jsx)("span",{children:h}),(0,a.jsx)("button",{onClick:v,className:"ml-auto text-sm text-blue-400 hover:text-blue-300",children:"Retry"})]})]}):(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50 ".concat(n),children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})}),i.weatherForecastDays,"-Day Forecast",r&&(0,a.jsxs)("span",{className:"text-sm font-normal text-slate-400",children:["• ",r.split(",")[0]]})]}),(0,a.jsx)("div",{className:"grid gap-2 ".concat(3===i.weatherForecastDays?"grid-cols-3":7===i.weatherForecastDays?"grid-cols-7":"grid-cols-5"),children:o.map((e,t)=>(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg ".concat(0===t?"bg-blue-500/20 border border-blue-500/30":"bg-slate-700/30"),children:[(0,a.jsx)("div",{className:"text-xs text-slate-400 mb-1",children:0===t?"Today":function(e){let[t,s,a]=e.split("-").map(Number);return new Date(t,s-1,a).toLocaleDateString("en-US",{weekday:"short"})}(e.date)}),(0,a.jsx)("div",{className:"text-2xl mb-1",children:e.icon}),(0,a.jsx)("div",{className:"text-sm font-semibold text-white",children:b(e.tempMax)}),(0,a.jsx)("div",{className:"text-xs text-slate-500",children:b(e.tempMin)})]},e.date))})]})}function W(e){var t;let{params:s}=e,{id:n}=(0,l.use)(s),c=(0,r.useRouter)(),{settings:d}=(0,m.t)(),[x,h]=(0,l.useState)(null),[u,p]=(0,l.useState)([]),[b,v]=(0,l.useState)(!1),[j,f]=(0,l.useState)(!1),[N,w]=(0,l.useState)(!1),[y,k]=(0,l.useState)(!1),[C,L]=(0,l.useState)(!1),[W,E]=(0,l.useState)(""),[I,_]=(0,l.useState)(""),[A,H]=(0,l.useState)(""),[P,O]=(0,l.useState)(null);(0,l.useEffect)(()=>{U()},[n]),(0,l.useEffect)(()=>{(null==x?void 0:x.latitude)&&(null==x?void 0:x.longitude)&&(async()=>{try{let e=await fetch("https://api.open-meteo.com/v1/forecast?"+"latitude=".concat(x.latitude,"&longitude=").concat(x.longitude,"&")+"current=temperature_2m,weather_code&timezone=auto",{signal:AbortSignal.timeout(1e4)});if(!e.ok)return;let t=await e.json();t.current&&O({temp:Math.round(t.current.temperature_2m),icon:F(t.current.weather_code)})}catch(e){}})()},[null==x?void 0:x.latitude,null==x?void 0:x.longitude]);let F=e=>0===e?"☀️":e<=2?"\uD83C\uDF24️":3===e?"☁️":e<=48?"\uD83C\uDF2B️":e<=67?"\uD83C\uDF27️":e<=77?"❄️":e<=82?"\uD83C\uDF27️":e<=86?"\uD83C\uDF28️":e>=95?"⛈️":"\uD83C\uDF21️",U=()=>{let e=(0,o.UJ)(n);if(!e)return void c.push("/trips");h(e),E(e.name),_(e.startDate),H(e.endDate),p((0,o.si)(n))},R=()=>{if(x&&W.trim()){let e={...x,name:W.trim()};(0,o.dz)(e),h(e),f(!1)}},[Z,V]=(0,l.useState)(!1),G=e=>{(0,o.zo)(e),U()};if(!x)return null;let $=e=>{let[t,s,a]=e.split("T")[0].split("-").map(Number);return new Date(t,s-1,a)},J=e=>{let[t,s,a]=e.split("T")[0].split("-").map(Number);return t&&s&&a?new Date(t,s-1,a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}):e},K=(()=>{let e=new Date;e.setHours(0,0,0,0);let t=$(x.startDate);t.setHours(0,0,0,0);let s=$(x.endDate);if(s.setHours(0,0,0,0),e<t){let s=Math.ceil((t.getTime()-e.getTime())/864e5);return{text:1===s?"1 day away":"".concat(s," days away"),type:"upcoming"}}if(e>=t&&e<=s){let t=Math.ceil((s.getTime()-e.getTime())/864e5);return 0===t?{text:"Ends today!",type:"active"}:{text:1===t?"1 day left":"".concat(t," days left"),type:"active"}}return null})();return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,a.jsx)("header",{className:"bg-slate-900 border-b border-slate-800 sticky top-0 z-10",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i(),{href:"/trips",className:"text-slate-300 hover:text-white flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M19 12H5m7-7-7 7 7 7"})}),"Trips"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>v(!b),className:"text-slate-300 hover:text-white p-2",children:(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,a.jsx)("circle",{cx:"12",cy:"5",r:"1"}),(0,a.jsx)("circle",{cx:"12",cy:"19",r:"1"})]})}),b&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-xl",children:[(0,a.jsx)("button",{onClick:()=>{x&&(!function(e,t){let s=new S.Ay,a=s.internal.pageSize.getWidth()-40,l=20,r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s.setFontSize(t),r?s.setFont("helvetica","bold"):s.setFont("helvetica","normal");let n=s.splitTextToSize(e,a),i=.4*t;n.forEach(e=>{l+i>s.internal.pageSize.getHeight()-20&&(s.addPage(),l=20),s.text(e,20,l),l+=i})},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;l+=e};r(e.name,18,!0),n(3),r("".concat(D(e.startDate)," - ").concat(D(e.endDate)),12),n(10),t.forEach((e,t)=>{switch(t>0&&n(8),e.type){case"flight":r("✈ FLIGHT",12,!0),n(3),r("".concat(e.airline," ").concat(e.flightNumber)),r("".concat(e.departureAirport," → ").concat(e.arrivalAirport)),r("".concat(D(e.date)," | Depart: ").concat(e.departureTime," | Arrive: ").concat(e.arrivalTime)),e.confirmationNumber&&r("Confirmation: ".concat(e.confirmationNumber)),e.seat&&r("Seat: ".concat(e.seat)),e.terminal&&r("Terminal: ".concat(e.terminal)),e.gate&&r("Gate: ".concat(e.gate));break;case"hotel":r("\uD83C\uDFE8 HOTEL",12,!0),n(3),r(e.name,10,!0),r(e.address),r("Phone: ".concat(e.phone)),r("Check-in: ".concat(D(e.checkInDate)).concat(e.checkInTime?" at ".concat(e.checkInTime):"")),r("Check-out: ".concat(D(e.checkOutDate)).concat(e.checkOutTime?" at ".concat(e.checkOutTime):"")),e.confirmationNumber&&r("Confirmation: ".concat(e.confirmationNumber));break;case"layover":r("\uD83D\uDD50 LAYOVER",12,!0),n(3),r(e.location,10,!0),r("Arrival: ".concat(M(e.arrivalTime))),r("Departure: ".concat(M(e.departureTime))),e.terminal&&r("Terminal: ".concat(e.terminal));break;case"transport":r("\uD83D\uDE97 TRANSPORT",12,!0),n(3),r("".concat(e.transportType).concat(e.company?" - ".concat(e.company):""),10,!0),r("Pickup: ".concat(e.pickupLocation," at ").concat(M(e.pickupDateTime))),r("Dropoff: ".concat(e.dropoffLocation," at ").concat(M(e.dropoffDateTime))),e.confirmationNumber&&r("Confirmation: ".concat(e.confirmationNumber));break;case"work":r("\uD83D\uDCBC WORK",12,!0),n(3),r(e.siteName,10,!0),r(e.address),e.contactName&&r("Contact: ".concat(e.contactName)),e.contactPhone&&r("Phone: ".concat(e.contactPhone)),e.contactEmail&&r("Email: ".concat(e.contactEmail));break;case"screenshot":r("\uD83D\uDCF7 SCREENSHOT",12,!0),n(3),e.caption&&r(e.caption),e.extractedText&&(r("Extracted text:",9,!0),r(e.extractedText,8));break;case"note":r("\uD83D\uDCDD NOTE",12,!0),n(3),e.title&&r(e.title,10,!0),r(e.text)}"notes"in e&&e.notes&&(n(2),r("Notes: ".concat(e.notes),9))});let i="".concat(e.name.replace(/[^a-z0-9]/gi,"_"),"_itinerary.pdf");s.save(i)}(x,u),v(!1))},className:"block w-full text-left px-4 py-2 text-slate-300 hover:bg-slate-700 rounded-t-lg",children:"Export to PDF"}),(0,a.jsx)(i(),{href:"/trips/".concat(n,"/duplicate"),className:"block w-full text-left px-4 py-2 text-slate-300 hover:bg-slate-700",children:"Duplicate Trip"}),(0,a.jsx)("button",{onClick:()=>{V(!0),v(!1)},className:"w-full text-left px-4 py-2 text-red-400 hover:bg-slate-700 rounded-b-lg",children:"Delete Trip"})]})]})]})})}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8 max-w-3xl",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex flex-col gap-2 mb-4",children:j?(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("input",{type:"text",value:W,onChange:e=>E(e.target.value),className:"text-2xl font-bold text-white bg-slate-800 border border-slate-600 rounded px-3 py-2 w-full",autoFocus:!0,onKeyDown:e=>"Enter"===e.key&&R()}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:R,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded transition-colors",children:"Save"}),(0,a.jsx)("button",{onClick:()=>{f(!1),E(x.name)},className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded transition-colors",children:"Cancel"})]})]}):(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white cursor-pointer hover:text-blue-400 transition-colors",onClick:()=>f(!0),title:"Tap to edit",children:x.name}),x.destination&&(0,a.jsxs)("p",{className:"flex items-center gap-1 text-slate-400 text-sm mt-1",children:[(0,a.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M17.657 16.657L13.414 20.9a2 2 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,a.jsx)("path",{d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),x.destination]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[K&&(0,a.jsxs)("span",{className:"text-xs px-3 py-1 rounded font-medium ".concat("active"===K.type?"bg-green-600/20 text-green-400":"bg-blue-600/20 text-blue-400"),children:[(0,a.jsxs)("svg",{className:"w-3 h-3 inline mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("path",{d:"M12 6v6l4 2"})]}),K.text]}),(0,a.jsx)("span",{className:"text-xs px-3 py-1 rounded ".concat({upcoming:"bg-blue-500",active:"bg-green-500",past:"bg-slate-600"}[x.status]," text-white font-medium"),children:{upcoming:"Upcoming",active:"Active",past:"Past"}[x.status]})]})]})}),N?(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"date",value:I,onChange:e=>_(e.target.value),className:"flex-1 bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"}),(0,a.jsx)("span",{className:"text-slate-400",children:"–"}),(0,a.jsx)("input",{type:"date",value:A,onChange:e=>H(e.target.value),className:"flex-1 bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{if(x&&I&&A){let e={...x,startDate:I,endDate:A};(0,o.dz)(e),h(e),w(!1)}},className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded transition-colors",children:"Save"}),(0,a.jsx)("button",{onClick:()=>{w(!1),_(x.startDate),H(x.endDate)},className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded transition-colors",children:"Cancel"})]})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-300 cursor-pointer hover:text-blue-400 transition-colors",onClick:()=>w(!0),title:"Tap to edit",children:[(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),(0,a.jsx)("path",{d:"M16 2v4M8 2v4M3 10h18"})]}),(0,a.jsxs)("span",{children:[J(x.startDate)," – ",J(x.endDate)]})]}),(0,a.jsx)("div",{className:"mt-4",children:y?(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-slate-400",children:"Trip Color:"}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:[{name:"Blue",value:"#3b82f6"},{name:"Purple",value:"#8b5cf6"},{name:"Pink",value:"#ec4899"},{name:"Red",value:"#ef4444"},{name:"Orange",value:"#f97316"},{name:"Yellow",value:"#eab308"},{name:"Green",value:"#10b981"},{name:"Teal",value:"#14b8a6"}].map(e=>(0,a.jsx)("button",{onClick:()=>(e=>{if(x){let t={...x,color:e};(0,o.dz)(t),h(t),k(!1)}})(e.value),className:"w-8 h-8 rounded-lg transition-all ".concat(x.color===e.value?"ring-2 ring-white ring-offset-2 ring-offset-slate-950":"opacity-70 hover:opacity-100"),style:{backgroundColor:e.value},title:e.name},e.value))})]}),(0,a.jsx)("button",{onClick:()=>k(!1),className:"text-sm text-slate-500 hover:text-slate-300 self-start",children:"Done"})]}):(0,a.jsxs)("button",{onClick:()=>k(!0),className:"flex items-center gap-2 text-slate-400 hover:text-slate-200 transition-colors",children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-slate-600",style:{backgroundColor:x.color||"#3b82f6"}}),(0,a.jsx)("span",{className:"text-sm",children:"Change color"})]})}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[C?(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-slate-400",children:"Destination timezone:"}),(0,a.jsxs)("select",{value:x.timezone||"",onChange:e=>{let t={...x,timezone:e.target.value||void 0};(0,o.dz)(t),h(t)},className:"bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[(0,a.jsx)("option",{value:"",children:"Not set"}),o.TA.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,a.jsx)("button",{onClick:()=>L(!1),className:"text-sm text-slate-500 hover:text-slate-300 self-start",children:"Done"})]}):(0,a.jsxs)("button",{onClick:()=>L(!0),className:"flex items-center gap-2 text-slate-400 hover:text-slate-200 transition-colors",children:[(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("path",{d:"M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),(0,a.jsx)("span",{className:"text-sm",children:x.timezone?"".concat((0,o.$k)(x.timezone)," • ").concat((0,o.E9)(x.timezone)):"Set destination timezone"})]}),P&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-slate-300 bg-slate-800/50 px-3 py-1.5 rounded-lg",children:[(0,a.jsx)("span",{className:"text-lg",children:P.icon}),(0,a.jsx)("span",{className:"text-sm font-medium",children:(t=P.temp,"fahrenheit"===d.temperatureUnit?"".concat(Math.round(9*t/5+32),"\xb0F"):"".concat(Math.round(t),"\xb0C"))}),(0,a.jsx)("span",{className:"text-xs text-slate-500",children:"now"})]})]})]}),(0,a.jsx)(i(),{href:"/trips/".concat(n,"/add-block"),className:"block w-full bg-blue-600 hover:bg-blue-700 text-white text-center py-3 rounded-lg font-medium mb-8 transition-colors",children:"+ Add Block"}),0===u.length?(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsxs)("svg",{className:"w-16 h-16 mx-auto mb-4 text-slate-600",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M12 6v6l4 2"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"})]}),(0,a.jsx)("p",{className:"text-slate-400 text-lg",children:"No blocks yet"}),(0,a.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"Add flights, hotels, and more to build your itinerary"})]}):(0,a.jsx)("div",{className:"space-y-4",children:u.map((e,t)=>(0,a.jsx)(g,{block:e,onDelete:G,onDuplicate:U,isFirst:0===t,isLast:t===u.length-1},e.id))}),(0,a.jsx)("div",{className:"mt-8 space-y-6 pb-24",children:x.latitude&&x.longitude&&(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[(0,a.jsxs)("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M17.657 16.657L13.414 20.9a2 2 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,a.jsx)("path",{d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Destination"]}),(0,a.jsx)(z,{latitude:x.latitude,longitude:x.longitude,destination:x.destination,className:"h-48 md:h-52"})]}),(0,a.jsx)("div",{children:(0,a.jsx)(B,{latitude:x.latitude,longitude:x.longitude,destination:x.destination})})]})})]}),Z&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>V(!1),children:(0,a.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 w-full max-w-md shadow-xl border border-slate-700",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"bg-red-500/20 p-2 rounded-full",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Delete Trip"})]}),(0,a.jsxs)("p",{className:"text-slate-300 mb-2",children:["Are you sure you want to delete ",(0,a.jsx)("span",{className:"font-semibold text-white",children:x.name}),"?"]}),(0,a.jsxs)("p",{className:"text-slate-500 text-sm mb-6",children:["This will also delete all ",u.length," block",1!==u.length?"s":""," associated with this trip. This action cannot be undone."]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,a.jsx)("button",{onClick:()=>V(!1),className:"px-4 py-2 rounded-lg bg-slate-700 text-white hover:bg-slate-600 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{(0,o.BG)(n),c.push("/trips")},className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors",children:"Delete Trip"})]})]})}),(0,a.jsx)(T.A,{tripId:n,tripName:x.name})]})}}},e=>{e.O(0,[484,33,930,874,291,319,900,441,964,358],()=>e(e.s=53909)),_N_E=e.O()}]);