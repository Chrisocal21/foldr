(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[400],{885:(e,t,a)=>{"use strict";a.d(t,{L:()=>i});var s=a(12115);function n(e){return window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}}function l(){return navigator.onLine}function r(){return!0}function i(){return(0,s.useSyncExternalStore)(n,l,r)}},35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},42612:(e,t,a)=>{Promise.resolve().then(a.bind(a,65833))},65833:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(95155),n=a(12115),l=a(35695),r=a(98319),i=a(885);function o(e){let{value:t,onChange:a,onPlaceSelect:l,placeholder:o="Search for a city...",className:c=""}=e,[d,u]=(0,n.useState)([]),[m,x]=(0,n.useState)(!1),[h,v]=(0,n.useState)(!1),[f,p]=(0,n.useState)(null),[g,b]=(0,n.useState)(!1),j=(0,n.useRef)(null),w=(0,n.useRef)(null),N=(0,i.L)();return(0,n.useEffect)(()=>{function e(e){w.current&&!w.current.contains(e.target)&&(v(!1),b(!1))}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.useEffect)(()=>{if(!f){if(j.current&&clearTimeout(j.current),t.length<2){u([]),v(!1),b(!1);return}if(!N){b(!0),x(!1),u([]);return}return b(!1),x(!0),j.current=setTimeout(async()=>{let e=await (0,r.hc)(t);0!==e.length||navigator.onLine||b(!0),u(e),v(e.length>0),x(!1)},400),()=>{j.current&&clearTimeout(j.current)}}},[t,f,N]),(0,s.jsxs)("div",{ref:w,className:"relative",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",value:t,onChange:e=>{var t;return t=e.target.value,void(p(null),a(t))},onFocus:()=>d.length>0&&v(!0),placeholder:o,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(c)}),(0,s.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500",children:m?(0,s.jsx)("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M12 2v4m0 12v4m-7-7H2m20 0h-3m-2.5-7.5L14 7m-4 10-2.5 2.5M17.5 17.5 15 15M6.5 6.5 9 9"})}):f?(0,s.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):(0,s.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{d:"M17.657 16.657L13.414 20.9a2 2 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),h&&d.length>0&&(0,s.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-64 overflow-y-auto",children:d.map((e,t)=>{var n;return(0,s.jsx)("button",{type:"button",onClick:()=>{p(e),b(!1),a(e.city+(e.country?", ".concat(e.country):"")),v(!1),l(e)},className:"w-full px-4 py-3 text-left hover:bg-slate-700 transition-colors first:rounded-t-lg last:rounded-b-lg border-b border-slate-700 last:border-0",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsxs)("svg",{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{d:"M17.657 16.657L13.414 20.9a2 2 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("p",{className:"text-white font-medium truncate",children:[e.city,e.country&&(0,s.jsxs)("span",{className:"text-slate-400",children:[", ",e.country]})]}),(0,s.jsx)("p",{className:"text-sm text-slate-500 truncate",children:e.displayName}),(0,s.jsx)("div",{className:"flex items-center gap-3 mt-1 text-xs text-slate-500",children:(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsxs)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("path",{d:"M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),null==(n=e.timezone.split("/").pop())?void 0:n.replace(/_/g," ")]})})]})]})},t)})}),g&&t.length>=2&&(0,s.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-amber-600/50 rounded-lg shadow-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 text-amber-400",children:[(0,s.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M18.364 5.636a9 9 0 11-12.728 12.728 9 9 0 0112.728-12.728zM15 12H9"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"You're offline"}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"City search requires an internet connection. You can still type the destination manually."})]})]})})]})}function c(){let e=(0,l.useRouter)(),[t,a]=(0,n.useState)({name:"",destination:"",startDate:"",endDate:"",color:"#3b82f6"}),[i,c]=(0,n.useState)(null);return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,s.jsx)("header",{className:"bg-slate-900 border-b border-slate-800",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("button",{onClick:()=>e.back(),className:"text-slate-300 hover:text-white flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M19 12H5m7-7-7 7 7 7"})}),"Back"]}),(0,s.jsx)("h1",{className:"text-xl font-bold text-white",children:"New Trip"}),(0,s.jsx)("div",{className:"w-16"})]})})}),(0,s.jsx)("main",{className:"container mx-auto px-4 py-8 max-w-2xl",children:(0,s.jsxs)("form",{onSubmit:a=>{a.preventDefault();let s={id:crypto.randomUUID(),name:t.name,destination:t.destination||void 0,latitude:null==i?void 0:i.latitude,longitude:null==i?void 0:i.longitude,timezone:null==i?void 0:i.timezone,startDate:t.startDate,endDate:t.endDate,color:t.color,status:(0,r._x)(t.startDate,t.endDate),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};(0,r.dz)(s),e.push("/trips/".concat(s.id))},className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"destination",className:"block text-sm font-medium text-slate-300 mb-2",children:"Destination"}),(0,s.jsx)(o,{value:t.destination,onChange:e=>a({...t,destination:e}),onPlaceSelect:e=>{c(e),a(t=>({...t,destination:e.city+(e.country?", ".concat(e.country):""),name:t.name||e.city}))},placeholder:"Search for a city..."}),i&&(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1 text-emerald-400",children:[(0,s.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("path",{d:"M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),(0,r.$k)(i.timezone)," â€¢ ",(0,r.E9)(i.timezone)]}),(0,s.jsx)("span",{className:"text-slate-500",children:"Auto-detected timezone"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-300 mb-2",children:"Trip Name"}),(0,s.jsx)("input",{type:"text",id:"name",required:!0,value:t.name,onChange:e=>a({...t,name:e.target.value}),placeholder:"e.g., Tokyo Summer 2025",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-300 mb-2",children:"Start Date"}),(0,s.jsx)("input",{type:"date",id:"startDate",required:!0,value:t.startDate,onChange:e=>a({...t,startDate:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-300 mb-2",children:"End Date"}),(0,s.jsx)("input",{type:"date",id:"endDate",required:!0,value:t.endDate,onChange:e=>a({...t,endDate:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Color"}),(0,s.jsx)("div",{className:"grid grid-cols-8 gap-2 sm:flex sm:gap-3",children:[{name:"Blue",value:"#3b82f6"},{name:"Purple",value:"#8b5cf6"},{name:"Pink",value:"#ec4899"},{name:"Red",value:"#ef4444"},{name:"Orange",value:"#f97316"},{name:"Yellow",value:"#eab308"},{name:"Green",value:"#10b981"},{name:"Teal",value:"#14b8a6"},{name:"Sky",value:"#0ea5e9"},{name:"Indigo",value:"#6366f1"},{name:"Fuchsia",value:"#d946ef"},{name:"Rose",value:"#f43f5e"},{name:"Amber",value:"#f59e0b"},{name:"Lime",value:"#84cc16"},{name:"Emerald",value:"#059669"},{name:"Cyan",value:"#06b6d4"}].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>a({...t,color:e.value}),className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg transition-all ".concat(t.color===e.value?"ring-2 ring-white ring-offset-2 ring-offset-slate-950":"opacity-70 hover:opacity-100"),style:{backgroundColor:e.value},title:e.name},e.value))})]}),(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium transition-colors",children:"Create Trip"})})]})})]})}}},e=>{e.O(0,[319,441,964,358],()=>e(e.s=42612)),_N_E=e.O()}]);