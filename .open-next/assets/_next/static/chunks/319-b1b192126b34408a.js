"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{33741:(e,t,a)=>{a.d(t,{$5:()=>l,AF:()=>c,M3:()=>n,Vv:()=>g,iD:()=>i,qo:()=>d,ri:()=>s,tK:()=>m});let o="/api";function r(){return localStorage.getItem("foldr_auth_token")}function n(){return!!r()&&!!localStorage.getItem("foldr_user_id")}async function i(e,t){try{let a=await fetch("".concat(o,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await a.json();if(r.success&&r.token&&r.userId)return localStorage.setItem("foldr_auth_token",r.token),localStorage.setItem("foldr_user_id",r.userId),localStorage.setItem("foldr_user_email",e),{success:!0,userId:r.userId,token:r.token};return{success:!1,error:r.error||"Login failed"}}catch(e){return{success:!1,error:"Network error - working offline"}}}async function l(e,t,a){try{let r=await fetch("".concat(o,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,inviteCode:a})}),n=await r.json();if(n.success&&n.token&&n.userId)return localStorage.setItem("foldr_auth_token",n.token),localStorage.setItem("foldr_user_id",n.userId),localStorage.setItem("foldr_user_email",e),{success:!0,userId:n.userId,token:n.token};return{success:!1,error:n.error||"Signup failed"}}catch(e){return{success:!1,error:"Network error"}}}function s(){localStorage.removeItem("foldr_auth_token"),localStorage.removeItem("foldr_user_id"),localStorage.removeItem("foldr_user_email")}async function c(){let e=r();if(!e)return{success:!1,error:"Not logged in"};try{let t={trips:localStorage.getItem("foldr_trips"),blocks:localStorage.getItem("foldr_blocks"),todos:localStorage.getItem("foldr_todos"),packingItems:localStorage.getItem("foldr_packing_items"),expenses:localStorage.getItem("foldr_expenses"),settings:localStorage.getItem("foldr_settings")},a=await fetch("".concat(o,"/sync/push"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)}),r=await a.json();if(r.success)return localStorage.setItem("foldr_last_sync",new Date().toISOString()),{success:!0};return{success:!1,error:r.error||"Sync failed"}}catch(e){return{success:!1,error:"Network error - will sync when online"}}}async function u(){let e=r();if(!e)return{success:!1,error:"Not logged in"};try{let t=await fetch("".concat(o,"/sync/pull"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();if(a.success)return a.trips&&localStorage.setItem("foldr_trips",a.trips),a.blocks&&localStorage.setItem("foldr_blocks",a.blocks),a.todos&&localStorage.setItem("foldr_todos",a.todos),a.packingItems&&localStorage.setItem("foldr_packing_items",a.packingItems),a.expenses&&localStorage.setItem("foldr_expenses",a.expenses),a.settings&&localStorage.setItem("foldr_settings",a.settings),localStorage.setItem("foldr_last_sync",new Date().toISOString()),{success:!0};return{success:!1,error:a.error||"Sync failed"}}catch(e){return{success:!1,error:"Network error - working offline"}}}async function g(){let e=await u();return e.success||"Network error - working offline"===e.error?await c():e}function m(){return localStorage.getItem("foldr_last_sync")}function d(){return localStorage.getItem("foldr_user_email")}},98319:(e,t,a)=>{a.d(t,{$O:()=>E,$k:()=>g,BG:()=>S,E9:()=>u,Et:()=>v,GG:()=>P,Gg:()=>N,K8:()=>F,Kv:()=>U,Oy:()=>B,TA:()=>m,TV:()=>O,Tr:()=>I,UJ:()=>p,VQ:()=>_,Wz:()=>K,XN:()=>x,Ys:()=>D,_x:()=>h,aU:()=>q,ck:()=>H,dz:()=>y,hc:()=>d,mU:()=>T,nH:()=>f,si:()=>A,t5:()=>w,w0:()=>C,yR:()=>M,yu:()=>b,zo:()=>k});var o=a(33741);let r="foldr_trips",n="foldr_blocks",i="foldr_todos",l=null;function s(){(0,o.M3)()&&(l&&clearTimeout(l),l=setTimeout(async()=>{(await (0,o.AF)()).success},2e3))}function c(e){let[t]=e.split("T"),[a,o,r]=t.split("-").map(Number);return new Date(a,o-1,r)}function u(e){try{return new Date().toLocaleTimeString("en-US",{timeZone:e,hour:"numeric",minute:"2-digit",hour12:!0})}catch(e){return""}}function g(e){try{let t=new Date().toLocaleTimeString("en-US",{timeZone:e,timeZoneName:"short"}).split(" ");return t[t.length-1]||""}catch(e){return""}}let m=[{label:"US Eastern (New York)",value:"America/New_York"},{label:"US Central (Chicago)",value:"America/Chicago"},{label:"US Mountain (Denver)",value:"America/Denver"},{label:"US Pacific (Los Angeles)",value:"America/Los_Angeles"},{label:"US Alaska",value:"America/Anchorage"},{label:"US Hawaii",value:"Pacific/Honolulu"},{label:"UK (London)",value:"Europe/London"},{label:"Central Europe (Paris)",value:"Europe/Paris"},{label:"Eastern Europe (Athens)",value:"Europe/Athens"},{label:"Dubai",value:"Asia/Dubai"},{label:"India (Mumbai)",value:"Asia/Kolkata"},{label:"Singapore",value:"Asia/Singapore"},{label:"Hong Kong",value:"Asia/Hong_Kong"},{label:"Tokyo",value:"Asia/Tokyo"},{label:"Sydney",value:"Australia/Sydney"},{label:"Auckland",value:"Pacific/Auckland"},{label:"Mexico City",value:"America/Mexico_City"},{label:"S\xe3o Paulo",value:"America/Sao_Paulo"},{label:"Buenos Aires",value:"America/Argentina/Buenos_Aires"}];async function d(e){if(!e||e.length<2)return[];try{let t=await fetch("/api/places/search?q=".concat(encodeURIComponent(e)));if(!t.ok)return[];return(await t.json()).map(e=>{var t,a;let o=parseFloat(e.lat),r=parseFloat(e.lon),n=e.address||{},i=n.city||n.town||n.village||n.municipality||"",l=n.country||"",s=(t=o,(a=r)<-50?t>18&&t<23&&a<-150?"Pacific/Honolulu":t>50&&a<-130?"America/Anchorage":a<=-115?"America/Los_Angeles":a<=-100?"America/Denver":a<=-85?"America/Chicago":a>-85?"America/New_York":t<25&&t>15&&a>-105?"America/Mexico_City":t<0&&a>-60?"America/Sao_Paulo":t<-30?"America/Argentina/Buenos_Aires":"America/New_York":a>=-10&&a<30?t>50&&a<5?"Europe/London":t>35&&t<60&&a>=0&&a<20?"Europe/Paris":t>35&&a>=20?"Europe/Athens":t<35&&t>0?"Africa/Cairo":"Europe/Paris":a>=30&&a<70?t>20&&t<35&&a<60?"Asia/Dubai":t>5&&t<35&&a>=60?"Asia/Kolkata":"Asia/Dubai":a>=70?t>30&&a>=100&&a<120?"Asia/Hong_Kong":t>0&&t<10&&a>100&&a<110?"Asia/Singapore":t>30&&a>=120&&a<145?"Asia/Tokyo":t<0&&a>110?"Australia/Sydney":a>165?"Pacific/Auckland":"Asia/Tokyo":t>18&&t<23&&a<-150?"Pacific/Honolulu":"UTC");return{displayName:e.display_name,city:i||e.display_name.split(",")[0],country:l,latitude:o,longitude:r,timezone:s}})}catch(e){return[]}}function f(){let e=localStorage.getItem(r);return(e?JSON.parse(e):[]).sort((e,t)=>c(e.startDate).getTime()-c(t.startDate).getTime())}function y(e){let t=f(),a=t.findIndex(t=>t.id===e.id);a>=0?t[a]={...e,updatedAt:new Date().toISOString()}:t.push(e),localStorage.setItem(r,JSON.stringify(t)),s()}function S(e){let t=f().filter(t=>t.id!==e);localStorage.setItem(r,JSON.stringify(t));let a=I().filter(t=>t.tripId!==e);localStorage.setItem(n,JSON.stringify(a)),s()}function p(e){return f().find(t=>t.id===e)}function h(e,t){let a=new Date;a.setHours(0,0,0,0);let o=c(e),r=c(t);return a<o?"upcoming":a>r?"past":"active"}function I(){let e=localStorage.getItem(n);return e?JSON.parse(e):[]}function A(e){return I().filter(t=>t.tripId===e).sort((e,t)=>{let a=e.date||e.createdAt,o=t.date||t.createdAt;return c(a).getTime()-c(o).getTime()})}function _(e){let t=I(),a=t.findIndex(t=>t.id===e.id);a>=0?t[a]={...e,updatedAt:new Date().toISOString()}:t.push(e),localStorage.setItem(n,JSON.stringify(t)),s()}function k(e){let t=I().filter(t=>t.id!==e);localStorage.setItem(n,JSON.stringify(t)),s()}function w(e,t){let a=b(e);if(!a)return;let o={...a,id:crypto.randomUUID(),tripId:t||a.tripId,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return _(o),o}function b(e){return I().find(t=>t.id===e)}function N(){let e=localStorage.getItem(i);return e?JSON.parse(e):[]}function v(e){let t=N(),a=t.findIndex(t=>t.id===e.id);a>=0?t[a]={...e,updatedAt:new Date().toISOString()}:t.push(e),localStorage.setItem(i,JSON.stringify(t)),s()}function D(e){let t=N().filter(t=>t.id!==e);localStorage.setItem(i,JSON.stringify(t)),s()}function O(e){let t=N(),a=t.findIndex(t=>t.id===e);a>=0&&(t[a].completed=!t[a].completed,t[a].updatedAt=new Date().toISOString(),localStorage.setItem(i,JSON.stringify(t)),s())}function T(e){let t=e.toLowerCase();return{trips:f().filter(e=>e.name.toLowerCase().includes(t)),blocks:I().filter(e=>JSON.stringify(e).toLowerCase().includes(t))}}let J="foldr_packing_items";function C(e){let t=localStorage.getItem(J);return(t?JSON.parse(t):[]).filter(t=>t.tripId===e)}function P(e){let t=localStorage.getItem(J),a=t?JSON.parse(t):[],o=a.findIndex(t=>t.id===e.id);o>=0?a[o]=e:a.push(e),localStorage.setItem(J,JSON.stringify(a)),s()}function U(e){let t=localStorage.getItem(J),a=t?JSON.parse(t):[];localStorage.setItem(J,JSON.stringify(a.filter(t=>t.id!==e))),s()}function E(e){let t=localStorage.getItem(J),a=t?JSON.parse(t):[],o=a.findIndex(t=>t.id===e);o>=0&&(a[o].packed=!a[o].packed,localStorage.setItem(J,JSON.stringify(a)),s())}function x(e,t){let a=new Set(C(e).map(e=>e.name.toLowerCase()));t.forEach(t=>{a.has(t.name.toLowerCase())||P({id:crypto.randomUUID(),tripId:e,name:t.name,category:t.category,packed:!1,quantity:t.quantity,createdAt:new Date().toISOString()})})}let B=[{name:"Beach",icon:"\uD83C\uDFD6️",items:[{name:"Swimsuit",category:"clothing"},{name:"Flip flops",category:"clothing"},{name:"Sunglasses",category:"accessories"},{name:"Sunscreen",category:"toiletries"},{name:"Beach towel",category:"other"},{name:"Hat/Cap",category:"accessories"},{name:"Shorts",category:"clothing",quantity:3},{name:"T-shirts",category:"clothing",quantity:4},{name:"Sandals",category:"clothing"},{name:"Aloe vera gel",category:"toiletries"}]},{name:"Business",icon:"\uD83D\uDCBC",items:[{name:"Dress shirts",category:"clothing",quantity:3},{name:"Dress pants",category:"clothing",quantity:2},{name:"Blazer/Jacket",category:"clothing"},{name:"Dress shoes",category:"clothing"},{name:"Tie",category:"accessories"},{name:"Belt",category:"accessories"},{name:"Laptop",category:"electronics"},{name:"Laptop charger",category:"electronics"},{name:"Business cards",category:"documents"},{name:"Portfolio/Notebook",category:"other"}]},{name:"Winter",icon:"❄️",items:[{name:"Heavy coat",category:"clothing"},{name:"Sweaters",category:"clothing",quantity:3},{name:"Thermal underwear",category:"clothing"},{name:"Winter boots",category:"clothing"},{name:"Gloves",category:"accessories"},{name:"Scarf",category:"accessories"},{name:"Beanie/Winter hat",category:"accessories"},{name:"Warm socks",category:"clothing",quantity:5},{name:"Lip balm",category:"toiletries"},{name:"Hand warmers",category:"other"}]},{name:"Essentials",icon:"✈️",items:[{name:"Passport",category:"documents"},{name:"Phone charger",category:"electronics"},{name:"Toothbrush",category:"toiletries"},{name:"Toothpaste",category:"toiletries"},{name:"Deodorant",category:"toiletries"},{name:"Underwear",category:"clothing",quantity:5},{name:"Socks",category:"clothing",quantity:5},{name:"Medications",category:"toiletries"},{name:"Wallet",category:"accessories"},{name:"Headphones",category:"electronics"}]}],L="foldr_expenses";function H(e){let t=localStorage.getItem(L),a=t?JSON.parse(t):[];return e?a.filter(t=>t.tripId===e).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()):a.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())}function q(e){let t=localStorage.getItem(L),a=t?JSON.parse(t):[],o=a.findIndex(t=>t.id===e.id);o>=0?a[o]=e:a.push(e),localStorage.setItem(L,JSON.stringify(a)),s()}function K(e){let t=localStorage.getItem(L),a=t?JSON.parse(t):[];localStorage.setItem(L,JSON.stringify(a.filter(t=>t.id!==e))),s()}let M=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"€",name:"Euro"},{code:"GBP",symbol:"\xa3",name:"British Pound"},{code:"JPY",symbol:"\xa5",name:"Japanese Yen"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CHF",symbol:"Fr",name:"Swiss Franc"},{code:"CNY",symbol:"\xa5",name:"Chinese Yuan"},{code:"INR",symbol:"₹",name:"Indian Rupee"},{code:"MXN",symbol:"Mex$",name:"Mexican Peso"},{code:"BRL",symbol:"R$",name:"Brazilian Real"},{code:"KRW",symbol:"₩",name:"Korean Won"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"THB",symbol:"฿",name:"Thai Baht"}],F=[{value:"transport",label:"Transport",icon:"\uD83D\uDE97"},{value:"accommodation",label:"Accommodation",icon:"\uD83C\uDFE8"},{value:"food",label:"Food & Drink",icon:"\uD83C\uDF7D️"},{value:"activities",label:"Activities",icon:"\uD83C\uDFAF"},{value:"shopping",label:"Shopping",icon:"\uD83D\uDECD️"},{value:"other",label:"Other",icon:"\uD83D\uDCE6"}]}}]);